import{_ as ee,C as ae,r as b,j as x,F as te,D as q,I as M,J as f,P as u,b0 as c,Q as n,K as F,L as k,b1 as m,S as I,O as R,b2 as O,au as U,aj as T,b3 as G,H as S}from"./index-DL2T8COf.js";import{B as D,N as oe}from"./mapConfig-kUeC-l4-.js";import{N as H,a as y,b as se}from"./text-BqtaFDUE.js";import{a as le,N as J}from"./RadioGroup-DT6bVFQO.js";import"./get-slot-Bk_rJcZu.js";const ne={class:"map-selector"},re={class:"selector-group"},ie={key:0,class:"selector-group"},ce={key:1,class:"selector-group"},ue={key:2,class:"selector-group"},de={class:"checkbox-list"},ve={key:3,class:"selector-group"},pe={class:"checkbox-list"},fe={__name:"MapSelector",setup(me){const v=ae(),g=b("regions"),_=b(null),N=b(null),C=b([]),E=b([]),l=b([]),r=b(new Set),L=x(()=>l.value.length?l.value.every(e=>r.value.has(String(e.code))):!1),K=x(()=>C.value.map(e=>({label:e,value:e}))),Q=x(()=>E.value.map(e=>({label:e,value:e})));function Y(e){_.value=null,N.value=null,v.setMapLevel(e),v.setMapFocus(null),P()}function W(e){v.setMapFocus(e),P(),$()}function X(e){v.setMapFocus(e),P(),$()}function V(e){return r.value.has(String(e))}function j(e,a){const o=String(e);a?r.value.add(o):r.value.delete(o),v.setSelectedSubdivisions(Array.from(r.value))}function B(e){e?r.value=new Set(l.value.map(a=>String(a.code))):r.value=new Set,v.setSelectedSubdivisions(Array.from(r.value))}function P(){r.value.clear(),l.value=[],v.setSelectedSubdivisions([])}async function $(){const e="/philippine-map-data-visualizer/";if(g.value==="regions"&&_.value)if(_.value.includes(oe))try{const d=await(await fetch(`${e}${D.cities}`)).json(),h=S(_.value),w=(d.features||[]).filter(t=>{const i=t.properties||{};return S(i.ADM1_EN)===h}).map(t=>{const i=t.properties||{},s=S(i.ADM3_EN);return{code:String(i.ADM3_PCODE||s),name:s}}).filter(t=>t.name),A=new Map(w.map(t=>[t.code,t]));l.value=Array.from(A.values()).sort((t,i)=>t.name.localeCompare(i.name)),r.value=new Set(l.value.map(t=>String(t.code))),v.setSelectedSubdivisions(Array.from(r.value))}catch{l.value=[]}else try{const d=await(await fetch(`${e}${D.provinces}`)).json(),h=S(_.value),w=(d.features||[]).filter(t=>{const i=t.properties||{};return S(i.ADM1_EN)===h}).map(t=>{const i=t.properties||{},s=S(i.ADM2_EN);return{code:String(i.ADM2_PCODE||s),name:s}}).filter(t=>t.name),A=new Map(w.map(t=>[t.code,t]));l.value=Array.from(A.values()).sort((t,i)=>t.name.localeCompare(i.name)),r.value=new Set(l.value.map(t=>String(t.code))),v.setSelectedSubdivisions(Array.from(r.value))}catch{l.value=[]}else if(g.value==="provinces"&&N.value)try{const o=await(await fetch(`${e}${D.provinces}`)).json(),d=S(N.value);let h=null;if((o.features||[]).some(s=>{const p=s.properties||{};return S(p.ADM2_EN)===d?(h=String(p.ADM2_PCODE||""),!0):!1}),!h){l.value=[];return}const t=((await(await fetch(`${e}${D.cities}`)).json()).features||[]).filter(s=>{const p=s.properties||{};return String(p.ADM2_PCODE||"")===h}).map(s=>{const p=s.properties||{},z=S(p.ADM3_EN);return{code:String(p.ADM3_PCODE||z),name:z}}).filter(s=>s.name),i=new Map(t.map(s=>[s.code,s]));l.value=Array.from(i.values()).sort((s,p)=>s.name.localeCompare(p.name)),r.value=new Set(l.value.map(s=>String(s.code))),v.setSelectedSubdivisions(Array.from(r.value))}catch{l.value=[]}else l.value=[]}async function Z(){const e="/philippine-map-data-visualizer/";try{const o=await(await fetch(`${e}${D.provinces}`)).json(),d=new Set,h=new Set;(o.features||[]).forEach(w=>{const A=w.properties||{};A.ADM1_EN&&d.add(S(A.ADM1_EN)),A.ADM2_EN&&h.add(S(A.ADM2_EN))}),C.value=Array.from(d).sort(),E.value=Array.from(h).sort()}catch{C.value=[],E.value=[]}}return te(()=>{Z()}),q(()=>v.mapLevel,e=>{g.value=e}),q([g,_,N],()=>{P(),$()}),(e,a)=>(f(),M("div",ne,[u(n(se),{size:"small",title:"Map View"},{default:c(()=>[u(n(H),{vertical:""},{default:c(()=>[F("div",re,[u(n(y),{strong:""},{default:c(()=>[...a[3]||(a[3]=[m("View Level",-1)])]),_:1}),u(n(le),{value:g.value,"onUpdate:value":[a[0]||(a[0]=o=>g.value=o),Y]},{default:c(()=>[u(n(H),{vertical:""},{default:c(()=>[u(n(J),{value:"regions"},{default:c(()=>[...a[4]||(a[4]=[m(" Regions ",-1)])]),_:1}),u(n(J),{value:"provinces"},{default:c(()=>[...a[5]||(a[5]=[m(" Provinces ",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),g.value==="regions"&&C.value.length>0?(f(),M("div",ie,[u(n(y),{strong:""},{default:c(()=>[...a[6]||(a[6]=[m("Select Region",-1)])]),_:1}),u(n(I),{value:_.value,"onUpdate:value":[a[1]||(a[1]=o=>_.value=o),W],options:K.value,placeholder:"View all regions",clearable:"",filterable:""},null,8,["value","options"])])):k("",!0),g.value==="provinces"&&E.value.length>0?(f(),M("div",ce,[u(n(y),{strong:""},{default:c(()=>[...a[7]||(a[7]=[m("Select Province",-1)])]),_:1}),u(n(I),{value:N.value,"onUpdate:value":[a[2]||(a[2]=o=>N.value=o),X],options:Q.value,placeholder:"View all provinces",clearable:"",filterable:""},null,8,["value","options"])])):k("",!0),g.value==="regions"&&_.value?(f(),M("div",ue,[u(n(y),{strong:""},{default:c(()=>[m("Provinces in "+R(_.value),1)]),_:1}),F("div",de,[l.value.length>0?(f(),O(n(U),{key:0,checked:L.value,"onUpdate:checked":B},{default:c(()=>[...a[8]||(a[8]=[m(" Select all ",-1)])]),_:1},8,["checked"])):k("",!0),(f(!0),M(T,null,G(l.value,o=>(f(),O(n(U),{key:o.code,checked:V(o.code),"onUpdate:checked":d=>j(o.code,d)},{default:c(()=>[m(R(o.name),1)]),_:2},1032,["checked","onUpdate:checked"]))),128))])])):k("",!0),g.value==="provinces"&&N.value?(f(),M("div",ve,[u(n(y),{strong:""},{default:c(()=>[m("Cities/Municipalities in "+R(N.value),1)]),_:1}),F("div",pe,[l.value.length>0?(f(),O(n(U),{key:0,checked:L.value,"onUpdate:checked":B},{default:c(()=>[...a[9]||(a[9]=[m(" Select all ",-1)])]),_:1},8,["checked"])):k("",!0),(f(!0),M(T,null,G(l.value,o=>(f(),O(n(U),{key:o.code,checked:V(o.code),"onUpdate:checked":d=>j(o.code,d)},{default:c(()=>[m(R(o.name),1)]),_:2},1032,["checked","onUpdate:checked"]))),128))])])):k("",!0)]),_:1})]),_:1})]))}},be=ee(fe,[["__scopeId","data-v-7c63951d"]]);export{be as default};
